<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MailWizard</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <div class="popup-header">
      <div class="logo">
        <img src="..\icons\icon48.png" alt="MailWizard Logo">
        <h1>MailWizard</h1>
      </div>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="generate">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
        </svg>
        Generate
      </button>

      <button class="tab active" data-tab="history">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
        </svg>
        History
      </button>

      <button class="tab active" data-tab="settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
        </svg>
        Settings
      </button>
    </div>

    <div class="tab-content">
      <div class="tab-panel active" id="generate-panel">
        <div class="section">
          <label>Answer Tone :</label>
          <select name="select" id="tone-select" class="select-input">
            <option value="normal">Normal</option>
            <option value="professional">Professional</option>
            <option value="friendly">Friendly</option>
            <option value="formal">Formal</option>
            <option value="academic">Academic</option>
          </select>
        </div>

        <div class="section">
          <label>Instructions (Optional) :</label>
          <textarea name="instructions" id="instructions-input" placeholder="Ex: Indicate my disponibility..." rows="3"></textarea>
        </div>

        <div class="section">
          <button id="generate-button" class="button-primary button-large">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
            </svg>
            Generate Magical Answer
          </button>
        </div>

        <div id="loading-state" class="loading-state" style="display: none;">
          <div class="loading"></div>
          <p>Generation of your answer</p>
        </div>
      
        <div id="result-container" class="result-container" style="display: none;">
          <div class="result-container-text">
            <label>Generated Answer :</label>
            <div id="response-text" class="response-text"></div>
          </div>

          <div class="result-actions">
            <button id="regenerate-button" class="button-secondary">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 4v6h6M23 20v-6h-6"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
              </svg>
              <span>Regenerate</span>
            </button>
            <button id="copy-button" class="button-success">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
              </svg>
              <span>Copy</span>
            </button>
            <button id="paste-button" class="button-primary">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
              </svg>
              <span>Paste Email</span>
            </button>
          </div>
        </div>
      </div>

      <div class="tab-panel" id="history-panel">
        <div id="history-list" class="history-list">
          <div class="empty-state">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
            </svg>
            <p>None history found yet</p>
            <small>Your generated answers will appear here</small>
          </div>
        </div>
      </div>

      <div class="tab-panel" id="settings-panel">
        <div class="section">
          <label>API Key Google Gemini</label>
          <div class="input-group">
            <input type="password" id="api-key-input" class="api-key-input" placeholder="Your key API...">
            <button id="toggle-key-visibility" class="button-icon" type="Display/Hide">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <small class="help-text" id="api-status">
            <span class="status-dot"></span>
            <span id="status-text">API Key not configured</span>
          </small>
        </div>

        <button id="save-api-key-button" class="button-primary button-large">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>
          </svg>
          Save the Key
        </button>

        <div class="info-box">
          <h3>ðŸ”‘ How to obtain your API Key ?</h3>
          <ol>
            <li>Go on <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
            <li>Login with your Google account</li>
            <li>Click on "Create API Key"</li>
            <li>Copy the API key and paste it in the field above</li>
          </ol>
          <p class="note">âœ¨ <strong>It's 100% free !</strong> None credit card required</p>
        </div>

        <div class="section">
          <button id="clear-history-button" class="button-danger">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
            Clear History
          </button>
        </div>

        <div class="about">
          <p><strong>Version:</strong> 1.0.0</p>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>